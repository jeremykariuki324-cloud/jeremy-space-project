{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container">
  <h1 class="title">Dashboard</h1>
  <p class="subtitle">You are logged in as <b>{{ session['user'] }}</b></p>

  <a class="link" href="{{ url_for('logout') }}">Logout</a>

  <hr class="divider">

  <h2 class="section-title">Create a Post</h2>

  <form method="POST" action="{{ url_for('dashboard') }}" class="form">
    <input class="input" type="text" name="title" placeholder="Post title" required>
    <textarea class="textarea" name="content" placeholder="Write something..." required></textarea>
    <button class="btn" type="submit">Publish</button>
  </form>

  <hr class="divider">

  <h2 class="section-title">All Posts</h2>

  {% if posts and posts|length > 0 %}
    {% for post in posts %}
      <div class="card">
        <h3 class="card-title">{{ post['title'] }}</h3>
        <p class="card-meta">By {{ post['username'] }} â€¢ {{ post['created_at'] }}</p>
        <p class="card-body">{{ post['content'] }}</p>
      </div>
    {% endfor %}
  {% else %}
    <p>No posts yet. Create your first post above.</p>
  {% endif %}
</div>
{% endblock %}
